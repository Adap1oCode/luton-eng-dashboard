#!/usr/bin/env sh
# Allow bypass with SKIP_VERIFY=1 for emergencies
if [ "$SKIP_VERIFY" = "1" ]; then
  echo "⚠️  Skipping pre-push verification (SKIP_VERIFY=1)"
  exit 0
fi

# Use --fast flag to skip build and health check (avoids server startup/shutdown issues)
# Build and health check run in nightly builds
npm run ci:verify -- --fast || { echo "❌ Pre-push verification failed. Use SKIP_VERIFY=1 to bypass (not recommended)"; exit 1; }
